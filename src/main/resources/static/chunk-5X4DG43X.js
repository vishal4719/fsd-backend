import{a as I,b as u,c as T,d as N,e as x,f as k,h as q,i as A,j as G,k as D,l as z,m as L,n as V}from"./chunk-GJFRIYG5.js";import{a as Y}from"./chunk-QJVGMPDY.js";import{b as S,c as E,d as M,i as R,r as F,s as O}from"./chunk-YLNKWVWQ.js";import{Ea as m,Ka as o,Ma as i,Na as r,Oa as p,Qa as w,Ra as d,Sa as s,Ta as y,Ua as P,Wa as g,qa as l,va as h,za as b}from"./chunk-L5ZCWPZT.js";var c=t=>({"is-invalid":t});function U(t,a){if(t&1&&(i(0,"div",27)(1,"strong"),s(2,"Error:"),r(),s(3),r()),t&2){let n=d();l(3),P(" ",n.errorMessage," ")}}function K(t,a){t&1&&(i(0,"small"),s(1,"Name is required"),r())}function $(t,a){t&1&&(i(0,"small"),s(1,"Name must be at least 3 characters"),r())}function H(t,a){if(t&1&&(i(0,"div",28),m(1,K,2,0,"small",24)(2,$,2,0,"small",24),r()),t&2){let n=d();l(),o("ngIf",n.name==null||n.name.errors==null?null:n.name.errors.required),l(),o("ngIf",n.name==null||n.name.errors==null?null:n.name.errors.minlength)}}function J(t,a){t&1&&(i(0,"small"),s(1,"Email is required"),r())}function Q(t,a){t&1&&(i(0,"small"),s(1,"Please enter a valid email address"),r())}function W(t,a){if(t&1&&(i(0,"div",28),m(1,J,2,0,"small",24)(2,Q,2,0,"small",24),r()),t&2){let n=d();l(),o("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.required),l(),o("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.email)}}function X(t,a){t&1&&(i(0,"small"),s(1,"College name is required"),r())}function Z(t,a){t&1&&(i(0,"small"),s(1,"College name must be at least 3 characters"),r())}function ee(t,a){if(t&1&&(i(0,"div",28),m(1,X,2,0,"small",24)(2,Z,2,0,"small",24),r()),t&2){let n=d();l(),o("ngIf",n.clg_name==null||n.clg_name.errors==null?null:n.clg_name.errors.required),l(),o("ngIf",n.clg_name==null||n.clg_name.errors==null?null:n.clg_name.errors.minlength)}}function ne(t,a){t&1&&(i(0,"small"),s(1,"Phone number is required"),r())}function te(t,a){t&1&&(i(0,"small"),s(1,"Please enter a valid 10-digit phone number"),r())}function re(t,a){if(t&1&&(i(0,"div",28),m(1,ne,2,0,"small",24)(2,te,2,0,"small",24),r()),t&2){let n=d();l(),o("ngIf",n.phone_no==null||n.phone_no.errors==null?null:n.phone_no.errors.required),l(),o("ngIf",n.phone_no==null||n.phone_no.errors==null?null:n.phone_no.errors.pattern)}}function ie(t,a){if(t&1&&(i(0,"option",29),s(1),r()),t&2){let n=a.$implicit,e=d();o("value",n),l(),y(e.roleDisplayNames[n])}}function le(t,a){t&1&&(i(0,"small"),s(1,"Role selection is required"),r())}function oe(t,a){if(t&1&&(i(0,"div",28),m(1,le,2,0,"small",24),r()),t&2){let n=d();l(),o("ngIf",n.role==null||n.role.errors==null?null:n.role.errors.required)}}function ae(t,a){t&1&&(i(0,"small"),s(1,"Password is required"),r())}function se(t,a){t&1&&(i(0,"small"),s(1,"Password must be at least 6 characters"),r())}function me(t,a){if(t&1&&(i(0,"div",28),m(1,ae,2,0,"small",24)(2,se,2,0,"small",24),r()),t&2){let n=d();l(),o("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.required),l(),o("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.minlength)}}function ue(t,a){t&1&&(i(0,"small"),s(1,"Please confirm your password"),r())}function de(t,a){t&1&&(i(0,"small"),s(1,"Passwords do not match"),r())}function pe(t,a){if(t&1&&(i(0,"div",28),m(1,ue,2,0,"small",24)(2,de,2,0,"small",24),r()),t&2){let n=d();l(),o("ngIf",n.confirmPassword==null||n.confirmPassword.errors==null?null:n.confirmPassword.errors.required),l(),o("ngIf",n.registerForm.hasError("mismatch"))}}function ge(t,a){t&1&&(i(0,"span"),p(1,"span",30),s(2," Creating Account... "),r())}function ce(t,a){t&1&&(i(0,"span"),s(1,"Create Account"),r())}var j=class t{constructor(a,n,e){this.fb=a;this.authService=n;this.router=e}registerForm;isSubmitting=!1;errorMessage="";roles=["USER","TASK_MANAGER"];roleDisplayNames={USER:"User",TASK_MANAGER:"Event Manager"};ngOnInit(){this.initForm()}initForm(){this.registerForm=this.fb.group({name:["",[u.required,u.minLength(3)]],email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]],confirmPassword:["",[u.required]],clg_name:["",[u.required,u.minLength(3)]],phone_no:["",[u.required,u.pattern("^[0-9]{10}$")]],roles:["",[u.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(a){let n=a.get("password"),e=a.get("confirmPassword");if(!n||!e)return null;let f=n.value,v=e.value;return f===v?null:{mismatch:!0}}onSubmit(){if(this.registerForm.invalid){this.markFormGroupTouched(this.registerForm);return}this.isSubmitting=!0,this.errorMessage="";let{name:a,email:n,password:e,clg_name:f,phone_no:v,roles:B}=this.registerForm.value,C={name:a,email:n,password:e,clg_name:f,phone_no:v,roles:B};console.log("Sending signup data:",C),this.authService.signup(C).subscribe({next:_=>{console.log("Registration successful",_),this.isSubmitting=!1,this.router.navigate(["/login"])},error:_=>{console.error("Registration error:",_),this.isSubmitting=!1,this.errorMessage=_.message||"Registration failed. Please try again later."}})}markFormGroupTouched(a){Object.values(a.controls).forEach(n=>{n.markAsTouched(),n instanceof x&&this.markFormGroupTouched(n)})}get name(){return this.registerForm.get("name")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}get clg_name(){return this.registerForm.get("clg_name")}get phone_no(){return this.registerForm.get("phone_no")}get role(){return this.registerForm.get("roles")}static \u0275fac=function(n){return new(n||t)(h(L),h(Y),h(F))};static \u0275cmp=b({type:t,selectors:[["app-register"]],decls:52,vars:34,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-title"],[1,"auth-form",3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Your Name","autocomplete","name",1,"form-control",3,"ngClass"],["class","error-message",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","your.email@example.com","autocomplete","email",1,"form-control",3,"ngClass"],["for","clg_name"],["type","text","id","clg_name","formControlName","clg_name","placeholder","Your College Name","autocomplete","organization",1,"form-control",3,"ngClass"],["for","phone_no"],["type","tel","id","phone_no","formControlName","phone_no","placeholder","Your Phone Number","autocomplete","tel",1,"form-control",3,"ngClass"],["for","roles"],["id","roles","formControlName","roles",1,"form-control",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","new-password",1,"form-control",3,"ngClass"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","new-password",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[4,"ngIf"],[1,"auth-links"],["routerLink","/login"],[1,"alert","alert-danger"],[1,"error-message"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Create Account"),r(),i(4,"form",3),w("ngSubmit",function(){return e.onSubmit()}),m(5,U,4,1,"div",4),i(6,"div",5)(7,"label",6),s(8,"Full Name"),r(),p(9,"input",7),m(10,H,3,2,"div",8),r(),i(11,"div",5)(12,"label",9),s(13,"Email"),r(),p(14,"input",10),m(15,W,3,2,"div",8),r(),i(16,"div",5)(17,"label",11),s(18,"College Name"),r(),p(19,"input",12),m(20,ee,3,2,"div",8),r(),i(21,"div",5)(22,"label",13),s(23,"Phone Number"),r(),p(24,"input",14),m(25,re,3,2,"div",8),r(),i(26,"div",5)(27,"label",15),s(28,"Select Role"),r(),i(29,"select",16)(30,"option",17),s(31,"Choose a role"),r(),m(32,ie,2,2,"option",18),r(),m(33,oe,2,1,"div",8),r(),i(34,"div",5)(35,"label",19),s(36,"Password"),r(),p(37,"input",20),m(38,me,3,2,"div",8),r(),i(39,"div",5)(40,"label",21),s(41,"Confirm Password"),r(),p(42,"input",22),m(43,pe,3,2,"div",8),r(),i(44,"button",23),m(45,ge,3,0,"span",24)(46,ce,2,0,"span",24),r(),i(47,"div",25)(48,"p"),s(49,"Already have an account? "),i(50,"a",26),s(51,"Log In"),r()()()()()()),n&2&&(l(4),o("formGroup",e.registerForm),l(),o("ngIf",e.errorMessage),l(4),o("ngClass",g(20,c,(e.name==null?null:e.name.invalid)&&((e.name==null?null:e.name.dirty)||(e.name==null?null:e.name.touched)))),l(),o("ngIf",(e.name==null?null:e.name.invalid)&&((e.name==null?null:e.name.dirty)||(e.name==null?null:e.name.touched))),l(4),o("ngClass",g(22,c,(e.email==null?null:e.email.invalid)&&((e.email==null?null:e.email.dirty)||(e.email==null?null:e.email.touched)))),l(),o("ngIf",(e.email==null?null:e.email.invalid)&&((e.email==null?null:e.email.dirty)||(e.email==null?null:e.email.touched))),l(4),o("ngClass",g(24,c,(e.clg_name==null?null:e.clg_name.invalid)&&((e.clg_name==null?null:e.clg_name.dirty)||(e.clg_name==null?null:e.clg_name.touched)))),l(),o("ngIf",(e.clg_name==null?null:e.clg_name.invalid)&&((e.clg_name==null?null:e.clg_name.dirty)||(e.clg_name==null?null:e.clg_name.touched))),l(4),o("ngClass",g(26,c,(e.phone_no==null?null:e.phone_no.invalid)&&((e.phone_no==null?null:e.phone_no.dirty)||(e.phone_no==null?null:e.phone_no.touched)))),l(),o("ngIf",(e.phone_no==null?null:e.phone_no.invalid)&&((e.phone_no==null?null:e.phone_no.dirty)||(e.phone_no==null?null:e.phone_no.touched))),l(4),o("ngClass",g(28,c,(e.role==null?null:e.role.invalid)&&((e.role==null?null:e.role.dirty)||(e.role==null?null:e.role.touched)))),l(3),o("ngForOf",e.roles),l(),o("ngIf",(e.role==null?null:e.role.invalid)&&((e.role==null?null:e.role.dirty)||(e.role==null?null:e.role.touched))),l(4),o("ngClass",g(30,c,(e.password==null?null:e.password.invalid)&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.touched)))),l(),o("ngIf",(e.password==null?null:e.password.invalid)&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.touched))),l(4),o("ngClass",g(32,c,((e.confirmPassword==null?null:e.confirmPassword.invalid)||e.registerForm.hasError("mismatch"))&&((e.confirmPassword==null?null:e.confirmPassword.dirty)||(e.confirmPassword==null?null:e.confirmPassword.touched)))),l(),o("ngIf",((e.confirmPassword==null?null:e.confirmPassword.invalid)||e.registerForm.hasError("mismatch"))&&((e.confirmPassword==null?null:e.confirmPassword.dirty)||(e.confirmPassword==null?null:e.confirmPassword.touched))),l(),o("disabled",e.registerForm.invalid||e.isSubmitting),l(),o("ngIf",e.isSubmitting),l(),o("ngIf",!e.isSubmitting))},dependencies:[V,k,D,z,I,G,T,N,q,A,O,R,S,E,M],styles:['.auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:2rem 1rem;min-height:calc(100vh - 80px)}.auth-card[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:16px;box-shadow:0 10px 30px #0000001f;padding:2.5rem;width:100%;max-width:500px;transition:transform .3s,box-shadow .3s;border:1px solid rgba(76,175,80,.1)}.auth-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #4caf5026}.auth-title[_ngcontent-%COMP%]{color:var(--primary-color);text-align:center;margin-bottom:2rem;font-size:2rem;font-weight:600;letter-spacing:.5px}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.8rem}.auth-form[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]{width:100%;margin:2rem 0 1rem;padding:14px;font-size:1.1rem;font-weight:500;letter-spacing:.5px;background:linear-gradient(135deg,var(--primary-color),var(--primary-light));color:var(--light-text);border:none;border-radius:50px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.auth-form[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--primary-light),var(--primary-color));transform:translateY(-3px);box-shadow:0 8px 25px #4caf5040}.auth-form[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,var(--primary-dark),var(--primary-color));transform:translateY(0)}.auth-form[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(255,255,255,.1),transparent);transition:all .3s ease}.auth-form[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]:hover:after{background:linear-gradient(135deg,rgba(255,255,255,.2),transparent)}.auth-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem;color:var(--text-light);font-size:.95rem}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:10px;padding:14px 18px;background-color:#f8fafc;border:1px solid #e2e8f0;transition:all .3s}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#fff;border-color:var(--primary-light);box-shadow:0 0 0 3px #4caf501a}.auth-form[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%]{border-color:var(--error-color);background-color:#fff9f9}.auth-links[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;font-size:.95rem;color:var(--text-light)}.auth-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;transition:all .3s}.auth-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-light);text-decoration:underline}.alert[_ngcontent-%COMP%]{padding:1rem 1.2rem;margin-bottom:1.5rem;border-radius:10px;font-size:.95rem}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#d32f2f14;color:var(--error-color);border-left:4px solid var(--error-color)}.error-message[_ngcontent-%COMP%]{color:var(--error-color);font-size:.85rem;margin-top:.5rem}']})};export{j as RegisterComponent};
